
var Job = function(id, fn, callback){
	if(!id){
		throw new Error('Jobs must have an ID');
	}
	if (typeof fn != 'undefined' && typeof fn != 'function') {
    	throw new Error('Jobs second parameter must be a function (if provided).');
	}
	if (!fn) {
    	var fn = function(){ console.log('default method.'); };
	}
	if (!callback) {
    	var callback = function(){};
	}
	this.fn = fn;
	this.func = false;
	this.id = id;
	callback();
};

Job.prototype.Encode = function(){
    console.log('encoding..');
    this.func = this.fn.toString();
    console.log(this);
}

Job.prototype.Decode = function() {
    if (typeof this.func != 'string') {
        return false;
    }
    this.fn = eval("(" + this.func + ")")
}

Job.prototype.setRawMethod = function(func) {
    this.func = func;
    this.Decode();
}

Job.prototype.setMethod = function(fn) {
    this.fn = fn;
}

module.exports = Job;